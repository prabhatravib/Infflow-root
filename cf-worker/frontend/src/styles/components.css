/* Central search bar overlay - ensure it's always on top */
.central-search-overlay {
  position: fixed !important;
  z-index: 999999 !important;
  transform: none !important;
  margin: 0 !important;
  padding: 0 !important;
  box-sizing: border-box !important;
}
.central-search-overlay * {
  box-sizing: border-box !important;
}

/* Hide radial overlay during PNG export */
.diagram-viewport.exporting .radial-overlay { 
  display: none !important; 
}

/* Keep overlay above SVG at all zoom levels */
[data-export-exclude] { 
  pointer-events: auto !important; 
  z-index: 50 !important;
}

/* Ensure export excludes overlay: export only the SVG element */
.diagram-viewport {
  position: relative;
}

/* Search bar injected into SVG via foreignObject */
.mermaid-search-bar {
  box-sizing: border-box;
  width: 100%;
  height: 100%;
  padding: 6px;
  background: var(--card);
  color: var(--card-foreground);
  border: 1px solid var(--border);
  border-radius: 12px;
  display: flex;
  align-items: center;
}

.mermaid-search-bar .msb-form {
  display: flex;
  align-items: center;
  gap: 8px;
  width: 100%;
  margin: 0;
}

.mermaid-search-bar .msb-input {
  flex: 1 1 auto;
  min-width: 120px;
  padding: 8px 12px;
  background: transparent;
  color: inherit;
  border: none;
  outline: none;
  font: inherit;
}

.mermaid-search-bar .msb-button {
  flex: 0 0 auto;
  padding: 8px 12px;
  background: var(--foreground);
  color: var(--background);
  border: 1px solid var(--border);
  border-radius: 10px;
  font: inherit;
  cursor: pointer;
}

.mermaid-search-bar .msb-button:hover {
  filter: brightness(0.95);
}

/* Hide node A under the search bar */
svg g#A > rect, svg g#A > text, svg g#A foreignObject { 
  opacity: 0; 
}

/* Bar always above; only its inputs clickable */
#radial-stage-bar { 
  position: fixed; 
  z-index: 2000; 
  pointer-events: none; 
}
#radial-stage-bar .search-bar * { 
  pointer-events: auto; 
}

/* Alignment wrapper for the chart: we nudge this, not Mermaid internals */
#radial-align { 
  position: relative; 
  z-index: 0; 
  will-change: transform; 
  transition: transform 180ms ease-out; 
}

/* Optional: clip the diagram to your stage viewport */
/* #radial-stage { overflow: hidden; } */

/* Radial bar overlay - pinned to viewport */
#radial-stage-bar {
  position: fixed;      /* pinned to viewport */
  inset: 0;
  pointer-events: none; /* clicks pass through by default */
  z-index: 2000;        /* above the SVG */
}

#radial-stage-bar .search-bar {
  position: fixed;      /* center at the given viewport point */
  left: 810px;
  top: 230px;
  transform: translate(-50%, -50%);
  pointer-events: auto; /* input stays interactive */
}
